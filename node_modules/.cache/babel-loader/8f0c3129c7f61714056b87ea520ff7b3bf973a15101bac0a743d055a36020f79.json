{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\toecm\\\\Documents\\\\PureConvo\\\\pure-app\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { v4 as uuidv4 } from 'uuid';\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Client } from \"@gradio/client\";\nimport { ethers } from \"ethers\";\nimport { useReactMediaRecorder } from \"react-media-recorder\";\nimport './App.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SPACE_URL = \"https://toecm-pureconvo.hf.space\";\nconst FALLBACK_DIALECTS = [\"Nigerian English\", \"Naija Pidgin\", \"Indian English\", \"American English\", \"British English\"]; // üü¢ Fix 1: Fallback\nconst TONES = [\"Neutral / Conversational\", \"Casual / Slang\", \"Formal / Professional\", \"Proverb / Idiom\"];\nfunction App() {\n  _s();\n  // --- 1. STATE ---\n  const [isPulsing, setIsPulsing] = useState(false);\n  const [userKey, setUserKey] = useState(null);\n  const [address, setAddress] = useState(\"\");\n  const [xp, setXP] = useState(0);\n  const [status, setStatus] = useState(\"IDLE\");\n  const [consentStatus, setConsentStatus] = useState(null);\n  const [missionState, setMissionState] = useState({\n    text: \"Connecting to Satellite...\",\n    emoji: \"üõ∞Ô∏è\",\n    ctx: \"Loading\",\n    image: \"https://loremflickr.com/400/220/city\"\n  });\n  const [isReviewing, setIsReviewing] = useState(false);\n  const [transcribedText, setTranscribedText] = useState(\"\");\n  const [dialects, setDialects] = useState([]);\n  const [selectedDialect, setSelectedDialect] = useState(\"\");\n  const [selectedTone, setSelectedTone] = useState(\"Neutral / Conversational\");\n  const [clarification, setClarification] = useState(\"\");\n\n  // New States for \"Review Mode\"\n  const [context, setContext] = useState(\"\");\n  const [pragmatics, setPragmatics] = useState(\"\");\n  const {\n    status: recStatus,\n    startRecording,\n    stopRecording,\n    mediaBlobUrl\n  } = useReactMediaRecorder({\n    audio: true\n  });\n\n  // --- 2. INIT & WARMUP ---\n  useEffect(() => {\n    // üü¢ Fix 3: Microphone Warmup (Prevents first-second cut off)\n    navigator.mediaDevices.getUserMedia({\n      audio: true\n    }).then(stream => {\n      console.log(\"Mic Warmed Up\");\n      // Stop the tracks immediately to stop the \"Recording\" indicator until actual use\n      stream.getTracks().forEach(track => track.stop());\n    }).catch(e => console.log(\"Mic Permission Pending...\", e));\n\n    // ID Generation\n    const storedKey = localStorage.getItem(\"pure_user_key\");\n    if (storedKey) {\n      setUserKey(storedKey);\n      setAddress(\"0x\" + storedKey.replace(/-/g, \"\").slice(0, 40));\n    } else {\n      const newKey = uuidv4();\n      localStorage.setItem(\"pure_user_key\", newKey);\n      setUserKey(newKey);\n      setAddress(\"0x\" + newKey.replace(/-/g, \"\").slice(0, 40));\n    }\n\n    // üü¢ Fix 1: Fetch Dialects with Fallback\n    const fetchDialects = async () => {\n      try {\n        var _result$data;\n        console.log(\"Connecting to Gradio...\");\n        const app = await Client.connect(SPACE_URL);\n        const result = await app.predict(\"/get_dialects\"); // API Name must match backend\n\n        if (result !== null && result !== void 0 && (_result$data = result.data) !== null && _result$data !== void 0 && _result$data[0]) {\n          const dList = JSON.parse(result.data[0]);\n          setDialects(dList);\n          if (dList.length > 0) setSelectedDialect(dList[0]);\n        } else {\n          throw new Error(\"Empty response\");\n        }\n      } catch (e) {\n        console.error(\"Dialect Fetch Failed, using fallback:\", e);\n        setDialects(FALLBACK_DIALECTS);\n        setSelectedDialect(FALLBACK_DIALECTS[0]);\n      }\n    };\n    fetchDialects();\n\n    // Fetch Mission\n    const fetchMission = async () => {\n      try {\n        const app = await Client.connect(SPACE_URL);\n        const result = await app.predict(\"/generate_mission\", [\"General\"]);\n        const data = JSON.parse(result.data[0]);\n        setMissionState({\n          text: data.text || \"Describe your day.\",\n          emoji: data.emoji || \"üå§Ô∏è\",\n          ctx: \"Daily Life\",\n          image: \"https://loremflickr.com/400/220/street\"\n        });\n      } catch (e) {\n        console.log(\"Mission fetch failed, using default.\");\n        setMissionState({\n          text: \"Describe your morning routine.\",\n          emoji: \"‚òï\",\n          ctx: \"Daily Life\",\n          image: \"https://loremflickr.com/400/220/coffee\"\n        });\n      }\n    };\n    fetchMission();\n  }, []);\n\n  // --- 3. HANDLERS ---\n  const handleReview = async () => {\n    if (!mediaBlobUrl) return;\n    setStatus(\"ANALYZING...\");\n    try {\n      const blob = await fetch(mediaBlobUrl).then(r => r.blob());\n      const app = await Client.connect(SPACE_URL);\n\n      // Call Transcribe\n      const transResult = await app.predict(\"/transcribe_check\", [blob, selectedDialect]);\n      setTranscribedText(transResult.data[0]);\n\n      // Call Clarification/Analysis\n      const clarifyResult = await app.predict(\"/generate_clarifications\", [transResult.data[0], selectedDialect]);\n      const analysisData = JSON.parse(clarifyResult.data[0]);\n\n      // Populate fields\n      setClarification(analysisData.clarification || analysisData.Meaning || \"\");\n      setContext(analysisData.context || \"General\");\n      setPragmatics(analysisData.pragmatics || \"\");\n      setIsReviewing(true);\n      setStatus(\"IDLE\");\n    } catch (e) {\n      console.error(e);\n      setTranscribedText(\"Error analyzing audio. Please type manually.\");\n      setIsReviewing(true);\n      setStatus(\"IDLE\");\n    }\n  };\n  const handleSubmit = async () => {\n    setStatus(\"MINTING...\");\n    try {\n      const blob = await fetch(mediaBlobUrl).then(r => r.blob());\n      const app = await Client.connect(SPACE_URL);\n      const result = await app.predict(\"/check_and_submit_logic\", [transcribedText,\n      // orig\n      selectedDialect,\n      // d_drop\n      \"\",\n      // d_new (unused here)\n      clarification,\n      // clar\n      selectedTone,\n      // tone\n      context,\n      // context\n      pragmatics,\n      // prag\n      userKey,\n      // user_key\n      blob,\n      // audio_blob\n      false // confirm_new\n      ]);\n      console.log(result);\n      setXP(prev => prev + 50);\n      setStatus(\"SUCCESS! +50 XP\");\n      setTimeout(() => {\n        setIsReviewing(false);\n        setTranscribedText(\"\");\n        setStatus(\"IDLE\");\n      }, 2000);\n    } catch (e) {\n      setStatus(\"ERROR\");\n      console.error(e);\n    }\n  };\n  const copyIDToClipboard = () => {\n    if (userKey) {\n      navigator.clipboard.writeText(userKey);\n      setIsPulsing(true);\n      setTimeout(() => setIsPulsing(false), 500);\n      alert(\"Session ID Copied: \" + userKey);\n    }\n  };\n\n  // --- 4. RENDER ---\n  if (!consentStatus) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"consent-screen\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uD83D\\uDD10 Data Consent\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"We collect voice samples to build an open-source dialect dataset.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Your data is anonymized and stored on IPFS/Blockchain.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"cyber-button\",\n        onClick: () => setConsentStatus(true),\n        children: \"I AGREE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 9\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cyber-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"hud-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"xp-badge\",\n          children: [\"\\u2728 \", xp, \" XP\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"status-badge\",\n          children: status\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mission-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mission-icon\",\n          children: missionState.emoji\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mission-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"CURRENT OBJECTIVE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: missionState.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"control-panel\",\n        children: !isReviewing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dialect-selector\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"TARGET DIALECT:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedDialect,\n              onChange: e => setSelectedDialect(e.target.value),\n              children: dialects.map(d => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: d,\n                children: d\n              }, d, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 48\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `record-zone ${recStatus === \"recording\" ? \"active\" : \"\"}`,\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `record-btn ${recStatus === \"recording\" ? \"pulsing\" : \"\"}`,\n              onMouseDown: startRecording,\n              onMouseUp: stopRecording,\n              onTouchStart: startRecording,\n              onTouchEnd: stopRecording,\n              children: recStatus === \"recording\" ? \"üéôÔ∏è RECORDING...\" : \"üéôÔ∏è HOLD TO SPEAK\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 21\n          }, this), mediaBlobUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"audio-preview\",\n            children: /*#__PURE__*/_jsxDEV(\"audio\", {\n              src: mediaBlobUrl,\n              controls: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"cyber-button\",\n            onClick: handleReview,\n            disabled: !mediaBlobUrl || status !== \"IDLE\",\n            children: status === \"IDLE\" ? \"ANALYZE VOICE\" : status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83D\\uDCDD Verify Data\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"audio-preview-mini\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\uD83D\\uDD0A Review Audio:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n              src: mediaBlobUrl,\n              controls: true,\n              style: {\n                width: '100%',\n                height: '30px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"I HEARD:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: transcribedText,\n              onChange: e => setTranscribedText(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"MEANING (Standard English):\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: clarification,\n              onChange: e => setClarification(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"TONE:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedTone,\n              onChange: e => setSelectedTone(e.target.value),\n              children: TONES.map(t => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: t,\n                children: t\n              }, t, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 45\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"action-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cancel-btn\",\n              onClick: () => setIsReviewing(false),\n              children: \"BACK\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cyber-button\",\n              onClick: handleSubmit,\n              children: \"MINT DATA (+50 XP)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `id-footer ${isPulsing ? 'pulse-active' : ''}`,\n        onClick: copyIDToClipboard,\n        title: \"Click to copy full Session ID\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"OPERATOR: \", address.slice(0, 6), \"...\", address.slice(-4)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '0.8em',\n            opacity: 0.6,\n            marginTop: '2px'\n          },\n          children: [\"ID: \", userKey ? `${userKey.slice(0, 8)}...` : \"Loading...\", \" \\uD83D\\uDCCB\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 190,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"kYc1g325SDrtaTrTMAqHy5Ido1o=\", false, function () {\n  return [useReactMediaRecorder];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["v4","uuidv4","React","useState","useEffect","useRef","Client","ethers","useReactMediaRecorder","jsxDEV","_jsxDEV","Fragment","_Fragment","SPACE_URL","FALLBACK_DIALECTS","TONES","App","_s","isPulsing","setIsPulsing","userKey","setUserKey","address","setAddress","xp","setXP","status","setStatus","consentStatus","setConsentStatus","missionState","setMissionState","text","emoji","ctx","image","isReviewing","setIsReviewing","transcribedText","setTranscribedText","dialects","setDialects","selectedDialect","setSelectedDialect","selectedTone","setSelectedTone","clarification","setClarification","context","setContext","pragmatics","setPragmatics","recStatus","startRecording","stopRecording","mediaBlobUrl","audio","navigator","mediaDevices","getUserMedia","then","stream","console","log","getTracks","forEach","track","stop","catch","e","storedKey","localStorage","getItem","replace","slice","newKey","setItem","fetchDialects","_result$data","app","connect","result","predict","data","dList","JSON","parse","length","Error","error","fetchMission","handleReview","blob","fetch","r","transResult","clarifyResult","analysisData","Meaning","handleSubmit","prev","setTimeout","copyIDToClipboard","clipboard","writeText","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","value","onChange","target","map","d","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","src","controls","disabled","style","width","height","t","title","fontSize","opacity","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/toecm/Documents/PureConvo/pure-app/src/App.js"],"sourcesContent":["import { v4 as uuidv4 } from 'uuid';\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { Client } from \"@gradio/client\";\r\nimport { ethers } from \"ethers\";\r\nimport { useReactMediaRecorder } from \"react-media-recorder\";\r\nimport './App.css';\r\n\r\nconst SPACE_URL = \"https://toecm-pureconvo.hf.space\"; \r\nconst FALLBACK_DIALECTS = [\"Nigerian English\", \"Naija Pidgin\", \"Indian English\", \"American English\", \"British English\"]; // üü¢ Fix 1: Fallback\r\nconst TONES = [\"Neutral / Conversational\", \"Casual / Slang\", \"Formal / Professional\", \"Proverb / Idiom\"];\r\n\r\nfunction App() {\r\n  // --- 1. STATE ---\r\n  const [isPulsing, setIsPulsing] = useState(false);\r\n  const [userKey, setUserKey] = useState(null);\r\n  const [address, setAddress] = useState(\"\");\r\n  const [xp, setXP] = useState(0);\r\n  const [status, setStatus] = useState(\"IDLE\"); \r\n  const [consentStatus, setConsentStatus] = useState(null);\r\n  const [missionState, setMissionState] = useState({ \r\n    text: \"Connecting to Satellite...\", emoji: \"üõ∞Ô∏è\", ctx: \"Loading\", image: \"https://loremflickr.com/400/220/city\" \r\n  });\r\n  \r\n  const [isReviewing, setIsReviewing] = useState(false);\r\n  const [transcribedText, setTranscribedText] = useState(\"\");\r\n  const [dialects, setDialects] = useState([]);\r\n  const [selectedDialect, setSelectedDialect] = useState(\"\");\r\n  const [selectedTone, setSelectedTone] = useState(\"Neutral / Conversational\");\r\n  const [clarification, setClarification] = useState(\"\");\r\n  \r\n  // New States for \"Review Mode\"\r\n  const [context, setContext] = useState(\"\");\r\n  const [pragmatics, setPragmatics] = useState(\"\");\r\n\r\n  const { status: recStatus, startRecording, stopRecording, mediaBlobUrl } = useReactMediaRecorder({ audio: true });\r\n\r\n  // --- 2. INIT & WARMUP ---\r\n  useEffect(() => {\r\n    // üü¢ Fix 3: Microphone Warmup (Prevents first-second cut off)\r\n    navigator.mediaDevices.getUserMedia({ audio: true })\r\n      .then(stream => {\r\n        console.log(\"Mic Warmed Up\");\r\n        // Stop the tracks immediately to stop the \"Recording\" indicator until actual use\r\n        stream.getTracks().forEach(track => track.stop());\r\n      })\r\n      .catch(e => console.log(\"Mic Permission Pending...\", e));\r\n\r\n    // ID Generation\r\n    const storedKey = localStorage.getItem(\"pure_user_key\");\r\n    if (storedKey) {\r\n      setUserKey(storedKey);\r\n      setAddress(\"0x\" + storedKey.replace(/-/g, \"\").slice(0, 40)); \r\n    } else {\r\n      const newKey = uuidv4();\r\n      localStorage.setItem(\"pure_user_key\", newKey);\r\n      setUserKey(newKey);\r\n      setAddress(\"0x\" + newKey.replace(/-/g, \"\").slice(0, 40));\r\n    }\r\n\r\n    // üü¢ Fix 1: Fetch Dialects with Fallback\r\n    const fetchDialects = async () => {\r\n      try {\r\n        console.log(\"Connecting to Gradio...\");\r\n        const app = await Client.connect(SPACE_URL);\r\n        const result = await app.predict(\"/get_dialects\"); // API Name must match backend\r\n        \r\n        if (result?.data?.[0]) {\r\n            const dList = JSON.parse(result.data[0]);\r\n            setDialects(dList);\r\n            if (dList.length > 0) setSelectedDialect(dList[0]);\r\n        } else {\r\n            throw new Error(\"Empty response\");\r\n        }\r\n      } catch (e) { \r\n        console.error(\"Dialect Fetch Failed, using fallback:\", e);\r\n        setDialects(FALLBACK_DIALECTS);\r\n        setSelectedDialect(FALLBACK_DIALECTS[0]);\r\n      }\r\n    };\r\n    fetchDialects();\r\n\r\n    // Fetch Mission\r\n    const fetchMission = async () => {\r\n        try {\r\n            const app = await Client.connect(SPACE_URL);\r\n            const result = await app.predict(\"/generate_mission\", [ \"General\" ]);\r\n            const data = JSON.parse(result.data[0]);\r\n            setMissionState({\r\n                text: data.text || \"Describe your day.\",\r\n                emoji: data.emoji || \"üå§Ô∏è\",\r\n                ctx: \"Daily Life\",\r\n                image: \"https://loremflickr.com/400/220/street\"\r\n            });\r\n        } catch (e) {\r\n            console.log(\"Mission fetch failed, using default.\");\r\n            setMissionState({ text: \"Describe your morning routine.\", emoji: \"‚òï\", ctx: \"Daily Life\", image: \"https://loremflickr.com/400/220/coffee\" });\r\n        }\r\n    };\r\n    fetchMission();\r\n\r\n  }, []);\r\n\r\n  // --- 3. HANDLERS ---\r\n  const handleReview = async () => {\r\n    if (!mediaBlobUrl) return;\r\n    setStatus(\"ANALYZING...\");\r\n    \r\n    try {\r\n        const blob = await fetch(mediaBlobUrl).then(r => r.blob());\r\n        const app = await Client.connect(SPACE_URL);\r\n        \r\n        // Call Transcribe\r\n        const transResult = await app.predict(\"/transcribe_check\", [ blob, selectedDialect ]);\r\n        setTranscribedText(transResult.data[0]);\r\n\r\n        // Call Clarification/Analysis\r\n        const clarifyResult = await app.predict(\"/generate_clarifications\", [ transResult.data[0], selectedDialect ]);\r\n        const analysisData = JSON.parse(clarifyResult.data[0]);\r\n        \r\n        // Populate fields\r\n        setClarification(analysisData.clarification || analysisData.Meaning || \"\");\r\n        setContext(analysisData.context || \"General\");\r\n        setPragmatics(analysisData.pragmatics || \"\");\r\n        \r\n        setIsReviewing(true);\r\n        setStatus(\"IDLE\");\r\n    } catch (e) {\r\n        console.error(e);\r\n        setTranscribedText(\"Error analyzing audio. Please type manually.\");\r\n        setIsReviewing(true);\r\n        setStatus(\"IDLE\");\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    setStatus(\"MINTING...\");\r\n    try {\r\n        const blob = await fetch(mediaBlobUrl).then(r => r.blob());\r\n        const app = await Client.connect(SPACE_URL);\r\n        \r\n        const result = await app.predict(\"/check_and_submit_logic\", [\r\n            transcribedText,     // orig\r\n            selectedDialect,     // d_drop\r\n            \"\",                  // d_new (unused here)\r\n            clarification,       // clar\r\n            selectedTone,        // tone\r\n            context,             // context\r\n            pragmatics,          // prag\r\n            userKey,             // user_key\r\n            blob,                // audio_blob\r\n            false                // confirm_new\r\n        ]);\r\n\r\n        console.log(result);\r\n        setXP(prev => prev + 50);\r\n        setStatus(\"SUCCESS! +50 XP\");\r\n        setTimeout(() => {\r\n            setIsReviewing(false);\r\n            setTranscribedText(\"\");\r\n            setStatus(\"IDLE\");\r\n        }, 2000);\r\n    } catch (e) {\r\n        setStatus(\"ERROR\");\r\n        console.error(e);\r\n    }\r\n  };\r\n\r\n  const copyIDToClipboard = () => {\r\n     if (userKey) {\r\n         navigator.clipboard.writeText(userKey);\r\n         setIsPulsing(true);\r\n         setTimeout(() => setIsPulsing(false), 500);\r\n         alert(\"Session ID Copied: \" + userKey);\r\n     }\r\n  };\r\n\r\n  // --- 4. RENDER ---\r\n  if (!consentStatus) {\r\n    return (\r\n        <div className=\"consent-screen\">\r\n            <h1>üîê Data Consent</h1>\r\n            <p>We collect voice samples to build an open-source dialect dataset.</p>\r\n            <p>Your data is anonymized and stored on IPFS/Blockchain.</p>\r\n            <button className=\"cyber-button\" onClick={() => setConsentStatus(true)}>I AGREE</button>\r\n        </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"cyber-container\">\r\n        {/* HEADER */}\r\n        <div className=\"hud-header\">\r\n            <div className=\"xp-badge\">‚ú® {xp} XP</div>\r\n            <div className=\"status-badge\">{status}</div>\r\n        </div>\r\n\r\n        {/* MISSION CARD */}\r\n        <div className=\"mission-card\">\r\n            <div className=\"mission-icon\">{missionState.emoji}</div>\r\n            <div className=\"mission-content\">\r\n                <h3>CURRENT OBJECTIVE</h3>\r\n                <p>{missionState.text}</p>\r\n            </div>\r\n        </div>\r\n\r\n        {/* MAIN INTERFACE */}\r\n        <div className=\"control-panel\">\r\n            {!isReviewing ? (\r\n                <>\r\n                    {/* RECORDING PHASE */}\r\n                    <div className=\"dialect-selector\">\r\n                        <label>TARGET DIALECT:</label>\r\n                        <select value={selectedDialect} onChange={(e) => setSelectedDialect(e.target.value)}>\r\n                            {dialects.map(d => <option key={d} value={d}>{d}</option>)}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div className={`record-zone ${recStatus === \"recording\" ? \"active\" : \"\"}`}>\r\n                        {/* üü¢ Fix 3: Improved Button UX */}\r\n                        <button \r\n                            className={`record-btn ${recStatus === \"recording\" ? \"pulsing\" : \"\"}`}\r\n                            onMouseDown={startRecording} \r\n                            onMouseUp={stopRecording}\r\n                            onTouchStart={startRecording}\r\n                            onTouchEnd={stopRecording}\r\n                        >\r\n                            {recStatus === \"recording\" ? \"üéôÔ∏è RECORDING...\" : \"üéôÔ∏è HOLD TO SPEAK\"}\r\n                        </button>\r\n                    </div>\r\n\r\n                    {mediaBlobUrl && (\r\n                        <div className=\"audio-preview\">\r\n                            <audio src={mediaBlobUrl} controls />\r\n                        </div>\r\n                    )}\r\n\r\n                    <button className=\"cyber-button\" onClick={handleReview} disabled={!mediaBlobUrl || status !== \"IDLE\"}>\r\n                        {status === \"IDLE\" ? \"ANALYZE VOICE\" : status}\r\n                    </button>\r\n                </>\r\n            ) : (\r\n                <>\r\n                    {/* REVIEW PHASE */}\r\n                    <h3>üìù Verify Data</h3>\r\n                    \r\n                    {/* üü¢ Fix 4: Audio Player Persists Here */}\r\n                    <div className=\"audio-preview-mini\">\r\n                        <label>üîä Review Audio:</label>\r\n                        <audio src={mediaBlobUrl} controls style={{width: '100%', height: '30px'}} />\r\n                    </div>\r\n\r\n                    <div className=\"input-group\">\r\n                        <label>I HEARD:</label>\r\n                        <textarea value={transcribedText} onChange={(e) => setTranscribedText(e.target.value)} />\r\n                    </div>\r\n\r\n                    <div className=\"input-group\">\r\n                        <label>MEANING (Standard English):</label>\r\n                        <textarea value={clarification} onChange={(e) => setClarification(e.target.value)} />\r\n                    </div>\r\n\r\n                    <div className=\"input-group\">\r\n                        <label>TONE:</label>\r\n                        <select value={selectedTone} onChange={(e) => setSelectedTone(e.target.value)}>\r\n                            {TONES.map(t => <option key={t} value={t}>{t}</option>)}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div className=\"action-row\">\r\n                        <button className=\"cancel-btn\" onClick={() => setIsReviewing(false)}>BACK</button>\r\n                        <button className=\"cyber-button\" onClick={handleSubmit}>MINT DATA (+50 XP)</button>\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n\r\n        {/* FOOTER */}\r\n        {/* üü¢ Fix 2: Session ID Explicitly Added */}\r\n        <div \r\n            className={`id-footer ${isPulsing ? 'pulse-active' : ''}`} \r\n            onClick={copyIDToClipboard} \r\n            title=\"Click to copy full Session ID\"\r\n        >\r\n            <div>OPERATOR: {address.slice(0, 6)}...{address.slice(-4)}</div>\r\n            <div style={{fontSize: '0.8em', opacity: 0.6, marginTop: '2px'}}>\r\n                ID: {userKey ? `${userKey.slice(0, 8)}...` : \"Loading...\"} üìã\r\n            </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}