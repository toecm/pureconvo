{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\toecm\\\\Documents\\\\PureConvo\\\\pure-app\\\\src\\\\App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$();\nimport { v4 as uuidv4 } from 'uuid';\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Client } from \"@gradio/client\";\nimport { useReactMediaRecorder } from \"react-media-recorder\";\nimport './App.css';\n\n// --- CONFIGURATION ---\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SPACE_URL = \"https://toecm-pureconvo.hf.space\";\nconst FALLBACK_DIALECTS = [\"AfricanAmerican English\", \"NaijaPidgin English\", \"Nigerian English\", \"Indian English\", \"American English\", \"+ Add New Dialect\"];\nconst TONES = [\"Neutral / Conversational\", \"Casual / Slang\", \"Formal / Professional\", \"Proverb / Idiom\"];\n\n// --- GREETINGS & PRIVACY ---\nconst NEW_GREETINGS = [\"Hello!\", \"Hi there!\", \"Greetings!\", \"Ready?\", \"Salutations!\", \"Welcome!\"];\nconst RETURNING_GREETINGS = [\"Welcome back!\", \"Good to see you again!\", \"Ready for another round?\", \"Hello again!\", \"Back for more?\", \"Resuming session!\"];\nconst PRIVACY_STATEMENTS = [\"Rest easyâ€”we collect sounds, not names.\", \"Your voice is a contribution; your identity is your own.\", \"Encrypted, anonymous, and essential.\", \"No profiles, no tracking. Just your unique voice.\", \"Powering the future of linguistics, one anonymous clip at a time.\", \"Speak your mind. Weâ€™ll keep the secret.\"];\n\n// --- ASSETS & HELPERS ---\nconst getDoodleUrl = k => `https://loremflickr.com/400/200/${k},sketch/all`;\nconst getPhotoUrl = k => `https://loremflickr.com/400/200/${k},street,city/all`;\nconst getRandom = arr => arr[Math.floor(Math.random() * arr.length)];\nfunction App() {\n  _s();\n  // === GLOBAL STATE ===\n  const [activeGame, setActiveGame] = useState(\"HOME\"); // HOME, ARCHIVIST, CHAT, VISION\n  const [userKey, setUserKey] = useState(null);\n  const [xp, setXP] = useState(0);\n  const [address, setAddress] = useState(\"\");\n  const [dialects, setDialects] = useState([]);\n  const [greeting, setGreeting] = useState(\"\");\n\n  // === INITIALIZATION ===\n  useEffect(() => {\n    // 1. User Identification\n    const storedKey = localStorage.getItem(\"pure_user_key\");\n    const key = storedKey || uuidv4();\n    if (!storedKey) localStorage.setItem(\"pure_user_key\", key);\n    setUserKey(key);\n    setAddress(\"0x\" + key.replace(/-/g, \"\").slice(0, 40));\n\n    // 2. Generate Session Greeting\n    const greetList = storedKey ? RETURNING_GREETINGS : NEW_GREETINGS;\n    setGreeting(`${getRandom(greetList)} ${getRandom(PRIVACY_STATEMENTS)}`);\n\n    // 3. Fetch Dialects (Robust Fix)\n    const loadDialects = async () => {\n      try {\n        const app = await Client.connect(SPACE_URL);\n        const res = await app.predict(\"/get_dialects\");\n        let dList;\n        const rawData = res.data[0];\n\n        // 1. Robust Parsing\n        // ðŸŸ¢ CHECK: Is it already an array? (Don't parse)\n        if (Array.isArray(rawData)) {\n          dList = rawData;\n        }\n        // ðŸŸ¢ CHECK: Is it a string? (Try to parse)\n        else if (typeof rawData === \"string\") {\n          try {\n            dList = JSON.parse(rawData);\n          } catch {\n            // Fallback for comma-separated strings\n            dList = rawData.split(',').map(d => d.trim());\n          }\n        } else {\n          dList = FALLBACK_DIALECTS;\n        }\n\n        // 2. ðŸŸ¢ STRICT FILTER LOGIC\n        if (dList && dList.length > 0) {\n          const cleanList = dList.filter(d => {\n            const lower = d.toLowerCase();\n            // Block JSON, Config, Metadata, AND \"Persona\" files\n            return !lower.includes('.json') && !lower.includes('config') && !lower.includes('metadata') && !lower.endsWith('persona'); // ðŸŸ¢ BLOCKS \"NaijaPidginPersona\"\n          });\n\n          // Step B: Clean up names (remove .csv if present)\n          const displayList = cleanList.map(d => d.replace(/\\.csv$/i, '').trim());\n\n          // Step C: Remove duplicates & Sort\n          const uniqueList = [...new Set(displayList)].sort();\n\n          // Step D: Add \"Add New\" option last\n          const finalList = uniqueList.filter(d => d !== \"+ Add New Dialect\");\n          finalList.push(\"+ Add New Dialect\");\n          console.log(\"Loaded Dialects (Cleaned):\", finalList);\n          setDialects(finalList);\n        } else {\n          setDialects(FALLBACK_DIALECTS);\n        }\n      } catch (e) {\n        console.warn(\"Dialect fetch issue:\", e);\n        setDialects(FALLBACK_DIALECTS);\n      }\n    };\n\n    // Start loading immediately\n    loadDialects();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cyber-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"hud-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"xp-badge\",\n          children: [\"\\u2728 \", xp, \" XP\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"status-badge\",\n          children: [\"MODE: \", activeGame]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), activeGame === \"HOME\" && /*#__PURE__*/_jsxDEV(HomeMenu, {\n        onSelect: setActiveGame,\n        greeting: greeting\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }, this), activeGame === \"ARCHIVIST\" && /*#__PURE__*/_jsxDEV(GameArchivist, {\n        userKey: userKey,\n        setXP: setXP,\n        dialects: dialects,\n        onBack: () => setActiveGame(\"HOME\"),\n        greeting: greeting\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }, this), activeGame === \"CHAT\" && /*#__PURE__*/_jsxDEV(GameSpeedChat, {\n        userKey: userKey,\n        setXP: setXP,\n        dialects: dialects,\n        onBack: () => setActiveGame(\"HOME\"),\n        greeting: greeting\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 13\n      }, this), activeGame === \"VISION\" && /*#__PURE__*/_jsxDEV(GameVisionQuest, {\n        userKey: userKey,\n        setXP: setXP,\n        dialects: dialects,\n        onBack: () => setActiveGame(\"HOME\"),\n        greeting: greeting\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 13\n      }, this), activeGame === \"LISTENER\" && /*#__PURE__*/_jsxDEV(GameActiveListener, {\n        userKey: userKey,\n        setXP: setXP,\n        dialects: dialects,\n        onBack: () => setActiveGame(\"HOME\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"id-footer\",\n        onClick: () => {\n          navigator.clipboard.writeText(userKey);\n          alert(\"Copied ID\");\n        },\n        children: [\"OPERATOR: \", address.slice(0, 6), \"... (Tap to Copy ID)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 5\n  }, this);\n}\n\n// ==========================================\n// ðŸ  HOME MENU (Updated: Icon-Focused)\n// ==========================================\n_s(App, \"zv3Y/ShIl71guu9XG99pn8dmqTg=\");\n_c = App;\nfunction HomeMenu({\n  onSelect,\n  greeting\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home-layout\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"welcome-banner\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: greeting\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"instruction-zone\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"SELECT GAME MODE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"instruction-line\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"menu-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"menu-card\",\n        onClick: () => onSelect(\"LISTENER\"),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"icon-large\",\n          children: \"\\uD83D\\uDC42\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"THE LISTENER\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '10px',\n            color: '#94a3b8'\n          },\n          children: \"Active Conversation Mode\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 14\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"menu-card\",\n        onClick: () => onSelect(\"ARCHIVIST\"),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"icon-large\",\n          children: \"\\uD83D\\uDCDC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"THE ARCHIVIST\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '10px',\n            color: '#94a3b8'\n          },\n          children: \"Relaxed. Daily Journaling.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"menu-card highlight\",\n        onClick: () => onSelect(\"CHAT\"),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"icon-large\",\n          children: \"\\u26A1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"SPEED CHAT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '10px',\n            color: '#94a3b8'\n          },\n          children: \"10s Timer. Rapid Fire.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"menu-card\",\n        onClick: () => onSelect(\"VISION\"),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"icon-large\",\n          children: \"\\uD83D\\uDC41\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"VISION QUEST\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '10px',\n            color: '#94a3b8'\n          },\n          children: \"Describe the first thing you see.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 179,\n    columnNumber: 9\n  }, this);\n}\n\n// ==========================================\n// ðŸ“œ GAME 1: THE ARCHIVIST (Updated: Thank You Message)\n// ==========================================\n_c2 = HomeMenu;\nfunction GameArchivist({\n  userKey,\n  setXP,\n  dialects,\n  onBack,\n  greeting\n}) {\n  _s2();\n  const [mission, setMission] = useState({\n    text: greeting,\n    subtext: \"Retrieving Archive Topic...\",\n    image: getDoodleUrl(\"abstract\")\n  });\n\n  // ðŸŸ¢ FORCE WAV FORMAT (Fixes Silent Audio)\n  const {\n    status,\n    startRecording,\n    stopRecording,\n    mediaBlobUrl\n  } = useReactMediaRecorder({\n    audio: true,\n    blobPropertyBag: {\n      type: \"audio/wav\"\n    }\n  });\n\n  // ðŸŸ¢ INFINITE LOOP LOGIC\n  const loadNextTopic = async () => {\n    const topics = [\"Daily Life\", \"Food\", \"Weather\", \"Childhood\", \"Hobbies\", \"Weekend Plans\", \"Family\"];\n    const randomTopic = getRandom(topics);\n\n    // ðŸŸ¢ UPDATE: Show \"Thank You\" message instead of \"Loading...\"\n    setMission(prev => ({\n      ...prev,\n      text: \"Entry Archived Successfully.\",\n      subtext: \"Thanks for your contribution! Fetching next topic...\",\n      image: getDoodleUrl(\"success\")\n    }));\n    try {\n      const app = await Client.connect(SPACE_URL);\n      const res = await app.predict(\"/generate_mission\", [randomTopic]);\n      const data = JSON.parse(res.data[0]);\n\n      // Artificial delay (1.5s) so they can read the \"Thank You\" message\n      setTimeout(() => {\n        setMission({\n          text: data.text,\n          subtext: \"Journal Entry â€¢ Keep it short (1 sentence)\",\n          image: getDoodleUrl(randomTopic)\n        });\n      }, 1500);\n    } catch {\n      setMission({\n        text: `Tell me a short sentence about your ${randomTopic.toLowerCase()}.`,\n        subtext: \"Offline Mode â€¢ Keep it short (1 sentence)\",\n        image: getDoodleUrl(\"coffee\")\n      });\n    }\n  };\n\n  // Load first topic on mount\n  useEffect(() => {\n    loadNextTopic();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(SharedGameLayout, {\n    title: \"ARCHIVE ENTRY\",\n    mission: mission,\n    recStatus: status,\n    startRec: startRecording,\n    stopRec: stopRecording,\n    mediaBlob: mediaBlobUrl,\n    dialects: dialects,\n    userKey: userKey,\n    setXP: setXP,\n    onBack: onBack,\n    onNext: loadNextTopic\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 277,\n    columnNumber: 9\n  }, this);\n}\n\n// ==========================================\n// âš¡ GAME 2: SPEED CHAT (Infinite Loop + Timer)\n// ==========================================\n_s2(GameArchivist, \"8B0hwIqox8tTZei7zBgDsP5Xq3s=\", false, function () {\n  return [useReactMediaRecorder];\n});\n_c3 = GameArchivist;\nfunction GameSpeedChat({\n  userKey,\n  setXP,\n  dialects,\n  onBack,\n  greeting\n}) {\n  _s3();\n  const [stage, setStage] = useState(\"onboarding\");\n  const [nickname, setNickname] = useState(localStorage.getItem(\"pure_nickname\") || \"\");\n  const [mission, setMission] = useState({\n    text: greeting,\n    subtext: \"Establishing Secure Link...\",\n    image: getDoodleUrl(\"network\")\n  });\n  const [timeLeft, setTimeLeft] = useState(10);\n  const {\n    status,\n    startRecording,\n    stopRecording,\n    mediaBlobUrl\n  } = useReactMediaRecorder({\n    audio: true,\n    blobPropertyBag: {\n      type: \"audio/wav\"\n    } // ðŸŸ¢ FORCE WAV FORMAT\n  });\n  const timerRef = useRef(null);\n\n  // Timer Logic\n  useEffect(() => {\n    if (status === \"recording\") {\n      setTimeLeft(10);\n      timerRef.current = setInterval(() => {\n        setTimeLeft(p => {\n          if (p <= 1) {\n            stopRecording();\n            return 0;\n          }\n          return p - 1;\n        });\n      }, 1000);\n    } else {\n      clearInterval(timerRef.current);\n    }\n    return () => clearInterval(timerRef.current);\n  }, [status, stopRecording]);\n  const fetchMission = async topic => {\n    setMission(prev => ({\n      ...prev,\n      text: greeting,\n      subtext: `Loading Topic: ${topic}...`\n    }));\n    try {\n      const app = await Client.connect(SPACE_URL);\n      const res = await app.predict(\"/generate_mission\", [`Ask ${nickname} about ${topic}`]);\n      const data = JSON.parse(res.data[0]);\n      setMission({\n        text: data.text,\n        subtext: `Target: ${topic}`,\n        image: getDoodleUrl(topic)\n      });\n    } catch {\n      setMission({\n        text: `Hey ${nickname}, tell me about ${topic}!`,\n        subtext: \"Offline Mode\",\n        image: getDoodleUrl(topic)\n      });\n    }\n  };\n  if (stage === \"onboarding\") {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"onboarding-screen\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"IDENTIFY YOURSELF\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"cyber-input\",\n        value: nickname,\n        onChange: e => setNickname(e.target.value),\n        placeholder: \"Enter Codename\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"cyber-button\",\n          onClick: () => {\n            if (!nickname) return;\n            localStorage.setItem(\"pure_nickname\", nickname);\n            setStage(\"challenge\");\n            fetchMission(\"Hobbies\");\n          },\n          children: \"START MISSION\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 26\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"cancel-btn\",\n          onClick: onBack,\n          children: \"RETURN TO BASE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(SharedGameLayout, {\n    title: `CHAT: ${nickname.toUpperCase()}`,\n    mission: mission,\n    recStatus: status,\n    startRec: startRecording,\n    stopRec: stopRecording,\n    mediaBlob: mediaBlobUrl,\n    dialects: dialects,\n    userKey: userKey,\n    setXP: setXP,\n    onBack: onBack,\n    timer: timeLeft,\n    onNext: () => fetchMission(getRandom([\"Food\", \"Traffic\", \"Music\", \"Money\", \"Work\", \"School\", \"Family\", \"Dreams\"]))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 365,\n    columnNumber: 9\n  }, this);\n}\n\n// ==========================================\n// ðŸ‘ï¸ GAME 3: VISION QUEST (Clean View + Infinite)\n// ==========================================\n_s3(GameSpeedChat, \"PQJxhmNEGUK75mNeaduVtOuE2tM=\", false, function () {\n  return [useReactMediaRecorder];\n});\n_c4 = GameSpeedChat;\nfunction GameVisionQuest({\n  userKey,\n  setXP,\n  dialects,\n  onBack,\n  greeting\n}) {\n  _s4();\n  const [mission, setMission] = useState({\n    text: greeting,\n    subtext: \"Calibrating Optical Sensors...\",\n    image: getPhotoUrl(\"cyberpunk\")\n  });\n\n  // Inside GameVisionQuest\n  const {\n    status,\n    startRecording,\n    stopRecording,\n    mediaBlobUrl\n  } = useReactMediaRecorder({\n    audio: true,\n    blobPropertyBag: {\n      type: \"audio/wav\"\n    } // ðŸŸ¢ FORCE WAV FORMAT\n  });\n  const loadNewImage = () => {\n    const keywords = [\"market\", \"street\", \"festival\", \"classroom\", \"kitchen\", \"traffic\", \"cyberpunk\", \"park\", \"office\"];\n    const k = getRandom(keywords);\n    setMission({\n      text: \"In your own way, describe the first thing you see in this image.\",\n      subtext: `Target Sector: ${k.toUpperCase()}`,\n      image: getPhotoUrl(k)\n    });\n  };\n\n  // Load initial image (user sees greeting briefly then this loads)\n  useEffect(() => {\n    setTimeout(loadNewImage, 2500);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(SharedGameLayout, {\n    title: \"OBSERVATION DECK\",\n    mission: mission,\n    recStatus: status,\n    startRec: startRecording,\n    stopRec: stopRecording,\n    mediaBlob: mediaBlobUrl,\n    dialects: dialects,\n    userKey: userKey,\n    setXP: setXP,\n    onBack: onBack,\n    onNext: loadNewImage,\n    mode: \"vision\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 414,\n    columnNumber: 9\n  }, this);\n}\n\n// ==========================================\n// ðŸ‘‚ GAME 4: THE LISTENER (Auto-Process & Flow)\n// ==========================================\n_s4(GameVisionQuest, \"mr5IWmweFOnIMW57cjXk2owKHCs=\", false, function () {\n  return [useReactMediaRecorder];\n});\n_c5 = GameVisionQuest;\nfunction GameActiveListener({\n  userKey,\n  setXP,\n  dialects,\n  onBack\n}) {\n  _s5();\n  // STATE\n  const [messages, setMessages] = useState([{\n    sender: 'ai',\n    text: \"Hello! I'm Echo. What should I call you?\"\n  }]);\n  const [phase, setPhase] = useState(\"onboarding\"); // onboarding, chat, processing, verify, responding\n  const [nickname, setNickname] = useState(\"\");\n\n  // CURRENT TURN DATA\n  const [currentAudio, setCurrentAudio] = useState(null); // Stores the blob for submission\n  const [currentTranscript, setCurrentTranscript] = useState(\"\");\n  const [currentClarification, setCurrentClarification] = useState(\"\");\n  const chatEndRef = useRef(null);\n  const IS_ADMIN = true; // Toggle for direct commit\n\n  // Auto-scroll\n  useEffect(() => {\n    var _chatEndRef$current;\n    (_chatEndRef$current = chatEndRef.current) === null || _chatEndRef$current === void 0 ? void 0 : _chatEndRef$current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages, phase]);\n\n  // TTS Helper\n  const speak = text => {\n    if ('speechSynthesis' in window) {\n      window.speechSynthesis.cancel(); // Stop previous speech\n      const u = new SpeechSynthesisUtterance(text);\n      u.pitch = 1;\n      u.rate = 1.1; // Slightly faster for natural flow\n      window.speechSynthesis.speak(u);\n    }\n  };\n\n  // ðŸŸ¢ 1. AUTOMATIC AUDIO HANDLER (Triggered on Release)\n  const handleAudioStop = async (blobUrl, blob) => {\n    setPhase(\"processing\");\n    setCurrentAudio(blob); // Save for later submission\n\n    try {\n      const app = await Client.connect(SPACE_URL);\n\n      // A. Transcribe\n      const d = dialects[0] || \"General\";\n      const tRes = await app.predict(\"/transcribe_check\", [blob, d]);\n      const text = tRes.data[0];\n      setCurrentTranscript(text);\n\n      // B. Clarify (Active Listening)\n      const cRes = await app.predict(\"/generate_clarifications\", [text, d]);\n      const cText = parseClarification(cRes.data[0]);\n      setCurrentClarification(cText);\n      setPhase(\"verify\");\n\n      // ðŸŸ¢ TTS: Immediately verify via voice\n      speak(`Did you mean: ${cText}`);\n    } catch (e) {\n      console.error(\"Processing Error:\", e);\n      setMessages(p => [...p, {\n        sender: 'ai',\n        text: \"I didn't catch that. Could you say it again?\"\n      }]);\n      speak(\"I didn't catch that. Could you say it again?\");\n      setPhase(\"chat\");\n    }\n  };\n\n  // ðŸŸ¢ 2. RECORDING HOOK (With onStop trigger)\n  const {\n    status,\n    startRecording,\n    stopRecording\n  } = useReactMediaRecorder({\n    audio: true,\n    blobPropertyBag: {\n      type: \"audio/wav\"\n    },\n    onStop: handleAudioStop // <--- THIS MAKES IT AUTOMATIC\n  });\n\n  // 3. TEXT INPUT HANDLER (Only for Nickname/Onboarding)\n  const handleTextInput = () => {\n    if (!currentTranscript.trim()) return;\n    const name = currentTranscript.trim();\n    setNickname(name);\n    const response = `Nice to meet you, ${name}. I'm listening. What's on your mind?`;\n    setMessages(p => [...p, {\n      sender: 'user',\n      text: name\n    }, {\n      sender: 'ai',\n      text: response\n    }]);\n    speak(response);\n    setCurrentTranscript(\"\");\n    setPhase(\"chat\");\n  };\n\n  // 4. CONFIRMATION HANDLER (Save & Continue)\n  const handleConfirm = async () => {\n    // A. Update Chat Log\n    setMessages(p => [...p, {\n      sender: 'user',\n      text: currentTranscript,\n      isAudio: true\n    }, {\n      sender: 'ai',\n      text: `Got it: \"${currentClarification}\"`\n    }]);\n\n    // B. Background Save\n    const app = await Client.connect(SPACE_URL);\n    const d = dialects[0] || \"General\";\n\n    // Fire and forget (don't await this, keeps UI snappy)\n    app.predict(\"/check_and_submit_logic\", [currentTranscript, d, \"\", currentClarification, \"Conversational\", \"Chat\", \"Active Listening\", userKey, currentAudio, IS_ADMIN]);\n\n    // C. Generate Follow-up\n    setPhase(\"responding\");\n    try {\n      const prompt = `Reply to this statement naturally: \"${currentClarification}\"`;\n      const res = await app.predict(\"/generate_mission\", [prompt]);\n      const data = JSON.parse(res.data[0]);\n      const reply = data.text;\n      setMessages(p => [...p, {\n        sender: 'ai',\n        text: reply\n      }]);\n      speak(reply);\n      setPhase(\"chat\");\n    } catch {\n      const fallback = \"That's interesting. Tell me more.\";\n      setMessages(p => [...p, {\n        sender: 'ai',\n        text: fallback\n      }]);\n      speak(fallback);\n      setPhase(\"chat\");\n    }\n\n    // Cleanup\n    setXP(x => x + 25);\n    setCurrentTranscript(\"\");\n    setCurrentClarification(\"\");\n  };\n  const parseClarification = raw => {\n    try {\n      return JSON.parse(raw).clarification || raw;\n    } catch {\n      return raw;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"game-layout listener-mode\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"listener-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"back-icon\",\n        onClick: onBack,\n        children: \"\\u2190\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 571,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `status-dot ${status === \"recording\" ? \"pulsing-red\" : \"\"}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"ECHO \", nickname ? `| ${nickname.toUpperCase()}` : \"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 573,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 570,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-log\",\n      children: [messages.map((m, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `chat-bubble ${m.sender}`,\n        children: [m.isAudio && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            marginRight: '5px'\n          },\n          children: \"\\uD83C\\uDFA4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 580,\n          columnNumber: 39\n        }, this), m.text]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 579,\n        columnNumber: 21\n      }, this)), phase === \"processing\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-bubble ai typing\",\n        children: \"Echo is thinking...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 584,\n        columnNumber: 44\n      }, this), phase === \"responding\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-bubble ai typing\",\n        children: \"Echo is replying...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 44\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: chatEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 577,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"listener-controls\",\n      children: [phase === \"onboarding\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-bar\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"cyber-input\",\n          value: currentTranscript,\n          onChange: e => setCurrentTranscript(e.target.value),\n          placeholder: \"Type your nickname...\",\n          onKeyDown: e => e.key === 'Enter' && handleTextInput()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 595,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"cyber-button\",\n          onClick: handleTextInput,\n          style: {\n            marginLeft: '10px'\n          },\n          children: \"SEND\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 602,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 594,\n        columnNumber: 21\n      }, this), (phase === \"chat\" || phase === \"processing\" || phase === \"responding\") && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"record-bar\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `record-btn ${status === \"recording\" ? \"pulsing\" : \"\"}`,\n          onMouseDown: startRecording,\n          onMouseUp: stopRecording,\n          onTouchStart: startRecording,\n          onTouchEnd: stopRecording,\n          disabled: phase !== \"chat\" // Disable while processing\n          ,\n          style: {\n            width: '100%',\n            borderRadius: '12px',\n            padding: '20px'\n          },\n          children: status === \"recording\" ? \"ðŸ›‘ RELEASE TO SEND\" : phase === \"processing\" ? \"â³ PROCESSING...\" : phase === \"responding\" ? \"ðŸ”Š SPEAKING...\" : \"ðŸŽ™ï¸ HOLD TO SPEAK\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 609,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 608,\n        columnNumber: 21\n      }, this), phase === \"verify\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"verify-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"verify-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"YOU SAID (EDIT IF WRONG):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"cyber-input\",\n            value: currentTranscript,\n            onChange: e => setCurrentTranscript(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 629,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"verify-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"ECHO HEARD:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 636,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ai-text\",\n            children: [\"\\\"\", currentClarification, \"\\\"\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 635,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"verify-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"reject-btn\",\n            onClick: () => {\n              setPhase(\"chat\");\n              setCurrentTranscript(\"\");\n            },\n            children: \"RETRY\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 640,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"confirm-btn\",\n            onClick: handleConfirm,\n            children: \"YES, CONTINUE \\u2705\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 641,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 639,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 590,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 568,\n    columnNumber: 9\n  }, this);\n}\n\n// ==========================================\n// âš™ï¸ SHARED GAME LAYOUT (Updated with Regenerate)\n// ==========================================\n_s5(GameActiveListener, \"o5gM7BdNfUk7nrHFISxzRrutWgk=\", false, function () {\n  return [useReactMediaRecorder];\n});\n_c6 = GameActiveListener;\nfunction SharedGameLayout({\n  title,\n  mission,\n  recStatus,\n  startRec,\n  stopRec,\n  mediaBlob,\n  dialects,\n  userKey,\n  setXP,\n  onBack,\n  onNext,\n  timer,\n  mode\n}) {\n  _s6();\n  const [step, setStep] = useState(\"RECORD\");\n\n  // Data State\n  const [transcribed, setTranscribed] = useState(\"\");\n  const [clarification, setClarification] = useState(\"\");\n  const [tone, setTone] = useState(\"Neutral / Conversational\");\n  const [context, setContext] = useState(\"General\");\n  const [pragmatics, setPragmatics] = useState(\"\");\n  const [isRegenerating, setIsRegenerating] = useState(false); // ðŸŸ¢ NEW STATE\n\n  const [dialect, setDialect] = useState(dialects[0] || \"General\");\n  const [customD, setCustomD] = useState(\"\");\n\n  // 1. Initial Analysis (Audio -> Text + Meaning)\n  const handleAnalyze = async () => {\n    if (!mediaBlob) return;\n    setStep(\"ANALYZING\");\n    try {\n      const blob = await fetch(mediaBlob).then(r => r.blob());\n      const app = await Client.connect(SPACE_URL);\n      const d = dialect === \"+ Add New Dialect\" ? customD : dialect;\n      const tRes = await app.predict(\"/transcribe_check\", [blob, d]);\n      const text = tRes.data[0];\n      setTranscribed(text);\n\n      // Initial Clarification\n      const cRes = await app.predict(\"/generate_clarifications\", [text, d]);\n      parseClarification(cRes.data[0]);\n      setStep(\"REVIEW\");\n    } catch (e) {\n      console.error(e);\n      setStep(\"REVIEW\");\n      setTranscribed(\"Error analyzing audio.\");\n    }\n  };\n\n  // 2. ðŸŸ¢ NEW: Regenerate Meaning (Text -> Meaning)\n  const handleRegenerate = async () => {\n    if (!transcribed.trim()) return;\n    setIsRegenerating(true);\n    try {\n      const app = await Client.connect(SPACE_URL);\n      const d = dialect === \"+ Add New Dialect\" ? customD : dialect;\n      const res = await app.predict(\"/generate_clarifications\", [transcribed, d]);\n      parseClarification(res.data[0]);\n      setIsRegenerating(false);\n    } catch (e) {\n      console.error(e);\n      setClarification(\"Failed to regenerate. Please type manually.\");\n      setIsRegenerating(false);\n    }\n  };\n\n  // Helper to parse JSON or String responses\n  const parseClarification = rawData => {\n    let data;\n    try {\n      data = JSON.parse(rawData);\n    } catch {\n      data = {\n        clarification: rawData\n      }; // Fallback for plain text\n    }\n    setClarification(data.clarification || data.Meaning || rawData);\n    setContext(data.context || \"General\");\n    setPragmatics(data.pragmatics || \"\");\n  };\n\n  // 3. Final Submit\n  const handleSubmit = async () => {\n    setStep(\"MINTING\");\n    try {\n      const blob = await fetch(mediaBlob).then(r => r.blob());\n      const app = await Client.connect(SPACE_URL);\n      const d = dialect === \"+ Add New Dialect\" ? customD : dialect;\n      await app.predict(\"/check_and_submit_logic\", [transcribed, d, customD, clarification, tone, context, pragmatics, userKey, blob, false]);\n      setXP(p => p + 50);\n      if (onNext) {\n        setStep(\"RECORD\");\n        setTranscribed(\"\");\n        setClarification(\"\");\n        onNext();\n      } else {\n        onBack();\n      }\n    } catch {\n      setStep(\"RECORD\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"game-layout\",\n    children: [mode === \"vision\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vision-mode-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vision-image\",\n        style: {\n          backgroundImage: `url(${mission.image})`\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 754,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vision-text-block\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 756,\n          columnNumber: 25\n        }, this), mission.subtext && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"subtext\",\n          children: mission.subtext\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 757,\n          columnNumber: 45\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"main-text\",\n          children: mission.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 758,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 755,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 753,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mission-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"doodle-bg\",\n        style: {\n          backgroundImage: `url(${mission.image})`\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 763,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mission-content-overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 766,\n            columnNumber: 29\n          }, this), mission.subtext && /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: '0.8em',\n              opacity: 0.7,\n              marginBottom: '5px'\n            },\n            children: mission.subtext\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 767,\n            columnNumber: 49\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: mission.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 768,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 765,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 764,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 762,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"control-panel\",\n      children: [step === \"RECORD\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dialect-selector\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              fontSize: '11px',\n              color: '#94a3b8',\n              display: 'block',\n              marginBottom: '6px',\n              letterSpacing: '1px',\n              fontWeight: '600'\n            },\n            children: \"SELECT TARGET DIALECT (OR ADD NEW):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 778,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: dialect,\n            onChange: e => setDialect(e.target.value),\n            children: dialects.map(d => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: d,\n              children: d\n            }, d, false, {\n              fileName: _jsxFileName,\n              lineNumber: 783,\n              columnNumber: 52\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 782,\n            columnNumber: 29\n          }, this), dialect === \"+ Add New Dialect\" && /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"cyber-input\",\n            placeholder: \"Enter Name (e.g. Toronto Slang)\",\n            value: customD,\n            onChange: e => setCustomD(e.target.value),\n            style: {\n              marginTop: '8px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 786,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 777,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `record-zone ${recStatus === \"recording\" ? \"active\" : \"\"}`,\n          children: [timer !== undefined && recStatus === \"recording\" && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"timer\",\n            children: [timer, \"s\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 797,\n            columnNumber: 82\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `record-btn ${recStatus === \"recording\" ? \"pulsing\" : \"\"}`,\n            onMouseDown: startRec,\n            onMouseUp: stopRec,\n            onTouchStart: startRec,\n            onTouchEnd: stopRec,\n            children: recStatus === \"recording\" ? \"ðŸ›‘ RELEASE\" : \"ðŸŽ™ï¸ HOLD TO SPEAK\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 798,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 796,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"action-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"cancel-btn\",\n            onClick: onBack,\n            children: \"BACK\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 807,\n            columnNumber: 30\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"cyber-button\",\n            onClick: handleAnalyze,\n            disabled: !mediaBlob,\n            children: \"ANALYZE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 808,\n            columnNumber: 30\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 806,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true), (step === \"ANALYZING\" || step === \"MINTING\") && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: \"PROCESSING...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 813,\n        columnNumber: 66\n      }, this), step === \"REVIEW\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"review-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"audio-preview\",\n          style: {\n            marginBottom: '10px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              fontSize: '10px',\n              color: '#94a3b8',\n              display: 'block',\n              marginBottom: '5px'\n            },\n            children: \"REVIEW RECORDING:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 818,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n            src: mediaBlob,\n            controls: true,\n            style: {\n              width: '100%',\n              borderRadius: '8px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 819,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 817,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"I HEARD (EDIT IF NEEDED):\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 825,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 824,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: transcribed,\n            onChange: e => setTranscribed(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 827,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 823,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              marginBottom: '5px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                margin: 0\n              },\n              children: \"MEANING:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 833,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleRegenerate,\n              disabled: isRegenerating,\n              style: {\n                background: 'transparent',\n                border: '1px solid #38bdf8',\n                color: '#38bdf8',\n                fontSize: '10px',\n                padding: '2px 8px',\n                borderRadius: '4px',\n                cursor: 'pointer'\n              },\n              children: isRegenerating ? \"UPDATING...\" : \"ðŸ”„ REGENERATE FROM TEXT\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 834,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 832,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: clarification,\n            onChange: e => setClarification(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 845,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 831,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"TONE:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 849,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: tone,\n            onChange: e => setTone(e.target.value),\n            children: TONES.map(t => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: t,\n              children: t\n            }, t, false, {\n              fileName: _jsxFileName,\n              lineNumber: 851,\n              columnNumber: 49\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 850,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 848,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"action-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"cancel-btn\",\n            onClick: () => setStep(\"RECORD\"),\n            children: \"RETRY\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 856,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"cyber-button\",\n            onClick: handleSubmit,\n            children: \"MINT (+50 XP)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 857,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 855,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 816,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 774,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 749,\n    columnNumber: 9\n  }, this);\n}\n_s6(SharedGameLayout, \"2PgQIHRUONOc4eQOuUMqPZnrMHU=\");\n_c7 = SharedGameLayout;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"HomeMenu\");\n$RefreshReg$(_c3, \"GameArchivist\");\n$RefreshReg$(_c4, \"GameSpeedChat\");\n$RefreshReg$(_c5, \"GameVisionQuest\");\n$RefreshReg$(_c6, \"GameActiveListener\");\n$RefreshReg$(_c7, \"SharedGameLayout\");","map":{"version":3,"names":["v4","uuidv4","React","useState","useEffect","useRef","Client","useReactMediaRecorder","jsxDEV","_jsxDEV","Fragment","_Fragment","SPACE_URL","FALLBACK_DIALECTS","TONES","NEW_GREETINGS","RETURNING_GREETINGS","PRIVACY_STATEMENTS","getDoodleUrl","k","getPhotoUrl","getRandom","arr","Math","floor","random","length","App","_s","activeGame","setActiveGame","userKey","setUserKey","xp","setXP","address","setAddress","dialects","setDialects","greeting","setGreeting","storedKey","localStorage","getItem","key","setItem","replace","slice","greetList","loadDialects","app","connect","res","predict","dList","rawData","data","Array","isArray","JSON","parse","split","map","d","trim","cleanList","filter","lower","toLowerCase","includes","endsWith","displayList","uniqueList","Set","sort","finalList","push","console","log","e","warn","className","children","fileName","_jsxFileName","lineNumber","columnNumber","HomeMenu","onSelect","GameArchivist","onBack","GameSpeedChat","GameVisionQuest","GameActiveListener","onClick","navigator","clipboard","writeText","alert","_c","style","fontSize","color","_c2","_s2","mission","setMission","text","subtext","image","status","startRecording","stopRecording","mediaBlobUrl","audio","blobPropertyBag","type","loadNextTopic","topics","randomTopic","prev","setTimeout","SharedGameLayout","title","recStatus","startRec","stopRec","mediaBlob","onNext","_c3","_s3","stage","setStage","nickname","setNickname","timeLeft","setTimeLeft","timerRef","current","setInterval","p","clearInterval","fetchMission","topic","value","onChange","target","placeholder","marginTop","toUpperCase","timer","_c4","_s4","loadNewImage","keywords","mode","_c5","_s5","messages","setMessages","sender","phase","setPhase","currentAudio","setCurrentAudio","currentTranscript","setCurrentTranscript","currentClarification","setCurrentClarification","chatEndRef","IS_ADMIN","_chatEndRef$current","scrollIntoView","behavior","speak","window","speechSynthesis","cancel","u","SpeechSynthesisUtterance","pitch","rate","handleAudioStop","blobUrl","blob","tRes","cRes","cText","parseClarification","error","onStop","handleTextInput","name","response","handleConfirm","isAudio","prompt","reply","fallback","x","raw","clarification","m","i","marginRight","ref","onKeyDown","marginLeft","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","disabled","width","borderRadius","padding","_c6","_s6","step","setStep","transcribed","setTranscribed","setClarification","tone","setTone","context","setContext","pragmatics","setPragmatics","isRegenerating","setIsRegenerating","dialect","setDialect","customD","setCustomD","handleAnalyze","fetch","then","r","handleRegenerate","Meaning","handleSubmit","backgroundImage","opacity","marginBottom","display","letterSpacing","fontWeight","undefined","src","controls","justifyContent","alignItems","margin","background","border","cursor","t","_c7","$RefreshReg$"],"sources":["C:/Users/toecm/Documents/PureConvo/pure-app/src/App.js"],"sourcesContent":["import { v4 as uuidv4 } from 'uuid';\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { Client } from \"@gradio/client\";\r\nimport { useReactMediaRecorder } from \"react-media-recorder\";\r\nimport './App.css';\r\n\r\n// --- CONFIGURATION ---\r\nconst SPACE_URL = \"https://toecm-pureconvo.hf.space\"; \r\nconst FALLBACK_DIALECTS = [\r\n    \"AfricanAmerican English\", \r\n    \"NaijaPidgin English\", \r\n    \"Nigerian English\", \r\n    \"Indian English\", \r\n    \"American English\", \r\n    \"+ Add New Dialect\"\r\n];\r\nconst TONES = [\"Neutral / Conversational\", \"Casual / Slang\", \"Formal / Professional\", \"Proverb / Idiom\"];\r\n\r\n// --- GREETINGS & PRIVACY ---\r\nconst NEW_GREETINGS = [\"Hello!\", \"Hi there!\", \"Greetings!\", \"Ready?\", \"Salutations!\", \"Welcome!\"];\r\nconst RETURNING_GREETINGS = [\"Welcome back!\", \"Good to see you again!\", \"Ready for another round?\", \"Hello again!\", \"Back for more?\", \"Resuming session!\"];\r\nconst PRIVACY_STATEMENTS = [\r\n    \"Rest easyâ€”we collect sounds, not names.\", \r\n    \"Your voice is a contribution; your identity is your own.\",\r\n    \"Encrypted, anonymous, and essential.\", \r\n    \"No profiles, no tracking. Just your unique voice.\",\r\n    \"Powering the future of linguistics, one anonymous clip at a time.\", \r\n    \"Speak your mind. Weâ€™ll keep the secret.\"\r\n];\r\n\r\n// --- ASSETS & HELPERS ---\r\nconst getDoodleUrl = (k) => `https://loremflickr.com/400/200/${k},sketch/all`;\r\nconst getPhotoUrl = (k) => `https://loremflickr.com/400/200/${k},street,city/all`; \r\nconst getRandom = (arr) => arr[Math.floor(Math.random() * arr.length)];\r\n\r\nfunction App() {\r\n  // === GLOBAL STATE ===\r\n  const [activeGame, setActiveGame] = useState(\"HOME\"); // HOME, ARCHIVIST, CHAT, VISION\r\n  const [userKey, setUserKey] = useState(null);\r\n  const [xp, setXP] = useState(0);\r\n  const [address, setAddress] = useState(\"\");\r\n  const [dialects, setDialects] = useState([]);\r\n  const [greeting, setGreeting] = useState(\"\"); \r\n\r\n  // === INITIALIZATION ===\r\n  useEffect(() => {\r\n    // 1. User Identification\r\n    const storedKey = localStorage.getItem(\"pure_user_key\");\r\n    const key = storedKey || uuidv4();\r\n    if (!storedKey) localStorage.setItem(\"pure_user_key\", key);\r\n    setUserKey(key);\r\n    setAddress(\"0x\" + key.replace(/-/g, \"\").slice(0, 40));\r\n\r\n    // 2. Generate Session Greeting\r\n    const greetList = storedKey ? RETURNING_GREETINGS : NEW_GREETINGS;\r\n    setGreeting(`${getRandom(greetList)} ${getRandom(PRIVACY_STATEMENTS)}`);\r\n\r\n    // 3. Fetch Dialects (Robust Fix)\r\n    const loadDialects = async () => {\r\n        try {\r\n            const app = await Client.connect(SPACE_URL);\r\n            const res = await app.predict(\"/get_dialects\");\r\n            \r\n            let dList;\r\n            const rawData = res.data[0];\r\n\r\n            // 1. Robust Parsing\r\n\t    // ðŸŸ¢ CHECK: Is it already an array? (Don't parse)\r\n            if (Array.isArray(rawData)) {\r\n                dList = rawData;\r\n            } \r\n            // ðŸŸ¢ CHECK: Is it a string? (Try to parse)\r\n            else if (typeof rawData === \"string\") {\r\n                try {\r\n                    dList = JSON.parse(rawData);\r\n                } catch {\r\n                    // Fallback for comma-separated strings\r\n                    dList = rawData.split(',').map(d => d.trim());\r\n                }\r\n            } else {\r\n                dList = FALLBACK_DIALECTS;\r\n            }\r\n            \r\n            // 2. ðŸŸ¢ STRICT FILTER LOGIC\r\n            if (dList && dList.length > 0) {\r\n                const cleanList = dList.filter(d => {\r\n                    const lower = d.toLowerCase();\r\n                    // Block JSON, Config, Metadata, AND \"Persona\" files\r\n                    return !lower.includes('.json') && \r\n                           !lower.includes('config') && \r\n                           !lower.includes('metadata') &&\r\n                           !lower.endsWith('persona'); // ðŸŸ¢ BLOCKS \"NaijaPidginPersona\"\r\n                });\r\n\r\n                // Step B: Clean up names (remove .csv if present)\r\n                const displayList = cleanList.map(d => d.replace(/\\.csv$/i, '').trim());\r\n\r\n                // Step C: Remove duplicates & Sort\r\n                const uniqueList = [...new Set(displayList)].sort();\r\n\r\n                // Step D: Add \"Add New\" option last\r\n                const finalList = uniqueList.filter(d => d !== \"+ Add New Dialect\");\r\n                finalList.push(\"+ Add New Dialect\");\r\n                \r\n                console.log(\"Loaded Dialects (Cleaned):\", finalList);\r\n                setDialects(finalList);\r\n            } else {\r\n                setDialects(FALLBACK_DIALECTS);\r\n            }\r\n        } catch (e) {\r\n            console.warn(\"Dialect fetch issue:\", e);\r\n            setDialects(FALLBACK_DIALECTS);\r\n        }\r\n    };\r\n    \r\n    // Start loading immediately\r\n    loadDialects();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"cyber-container\">\r\n        {/* HUD HEADER */}\r\n        <div className=\"hud-header\">\r\n            <div className=\"xp-badge\">âœ¨ {xp} XP</div>\r\n            <div className=\"status-badge\">MODE: {activeGame}</div>\r\n        </div>\r\n\r\n        {/* VIEW CONTROLLER */}\r\n        {activeGame === \"HOME\" && (\r\n            <HomeMenu onSelect={setActiveGame} greeting={greeting} />\r\n        )}\r\n        \r\n        {activeGame === \"ARCHIVIST\" && (\r\n            <GameArchivist \r\n                userKey={userKey} setXP={setXP} dialects={dialects} \r\n                onBack={() => setActiveGame(\"HOME\")} \r\n                greeting={greeting} \r\n            />\r\n        )}\r\n\r\n        {activeGame === \"CHAT\" && (\r\n            <GameSpeedChat \r\n                userKey={userKey} setXP={setXP} dialects={dialects} \r\n                onBack={() => setActiveGame(\"HOME\")} \r\n                greeting={greeting} \r\n            />\r\n        )}\r\n\r\n        {activeGame === \"VISION\" && (\r\n            <GameVisionQuest \r\n                userKey={userKey} setXP={setXP} dialects={dialects} \r\n                onBack={() => setActiveGame(\"HOME\")} \r\n                greeting={greeting} \r\n            />\r\n        )}\r\n\r\n\t{activeGame === \"LISTENER\" && (\r\n            <GameActiveListener \r\n                userKey={userKey} setXP={setXP} dialects={dialects} \r\n                onBack={() => setActiveGame(\"HOME\")} \r\n            />\r\n        )}\r\n\r\n        {/* FOOTER */}\r\n        <div className=\"id-footer\" onClick={() => {navigator.clipboard.writeText(userKey); alert(\"Copied ID\")}}>\r\n            OPERATOR: {address.slice(0,6)}... (Tap to Copy ID)\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// ==========================================\r\n// ðŸ  HOME MENU (Updated: Icon-Focused)\r\n// ==========================================\r\nfunction HomeMenu({ onSelect, greeting }) {\r\n    return (\r\n        <div className=\"home-layout\">\r\n            {/* 1. Greeting Banner */}\r\n            <div className=\"welcome-banner\">\r\n                <p>{greeting}</p>\r\n            </div>\r\n\r\n            {/* 2. Clear Instruction */}\r\n            <div className=\"instruction-zone\">\r\n                <p>SELECT GAME MODE</p>\r\n                <div className=\"instruction-line\"></div>\r\n            </div>\r\n            \r\n            {/* 3. Big Icon Grid */}\r\n            <div className=\"menu-grid\">\r\n            \t<div className=\"menu-card\" onClick={() => onSelect(\"LISTENER\")}>\r\n                    <div className=\"icon-large\">ðŸ‘‚</div>\r\n                    <h3>THE LISTENER</h3>\r\n                    <p style={{fontSize:'10px', color:'#94a3b8'}}>Active Conversation Mode</p>\r\n                </div>\r\n\r\n                <div className=\"menu-card\" onClick={() => onSelect(\"ARCHIVIST\")}>\r\n                    <div className=\"icon-large\">ðŸ“œ</div>\r\n\t\t    <h3>THE ARCHIVIST</h3>\r\n\t\t    <p style={{fontSize:'10px', color:'#94a3b8'}}>Relaxed. Daily Journaling.</p>\r\n                </div>\r\n                \r\n                <div className=\"menu-card highlight\" onClick={() => onSelect(\"CHAT\")}>\r\n                    <div className=\"icon-large\">âš¡</div>\r\n                    <h3>SPEED CHAT</h3>\r\n\t\t    <p style={{fontSize:'10px', color:'#94a3b8'}}>10s Timer. Rapid Fire.</p>\r\n                </div>\r\n                \r\n                <div className=\"menu-card\" onClick={() => onSelect(\"VISION\")}>\r\n                    <div className=\"icon-large\">ðŸ‘ï¸</div>\r\n                    <h3>VISION QUEST</h3>\r\n\t\t    <p style={{fontSize:'10px', color:'#94a3b8'}}>Describe the first thing you see.</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// ==========================================\r\n// ðŸ“œ GAME 1: THE ARCHIVIST (Updated: Thank You Message)\r\n// ==========================================\r\nfunction GameArchivist({ userKey, setXP, dialects, onBack, greeting }) {\r\n    const [mission, setMission] = useState({ \r\n        text: greeting, \r\n        subtext: \"Retrieving Archive Topic...\", \r\n        image: getDoodleUrl(\"abstract\") \r\n    });\r\n    \r\n    // ðŸŸ¢ FORCE WAV FORMAT (Fixes Silent Audio)\r\n    const { status, startRecording, stopRecording, mediaBlobUrl } = useReactMediaRecorder({ \r\n        audio: true,\r\n        blobPropertyBag: { type: \"audio/wav\" } \r\n    });\r\n    \r\n    // ðŸŸ¢ INFINITE LOOP LOGIC\r\n    const loadNextTopic = async () => {\r\n        const topics = [\"Daily Life\", \"Food\", \"Weather\", \"Childhood\", \"Hobbies\", \"Weekend Plans\", \"Family\"];\r\n        const randomTopic = getRandom(topics);\r\n        \r\n        // ðŸŸ¢ UPDATE: Show \"Thank You\" message instead of \"Loading...\"\r\n        setMission(prev => ({ \r\n            ...prev, \r\n            text: \"Entry Archived Successfully.\",\r\n            subtext: \"Thanks for your contribution! Fetching next topic...\",\r\n            image: getDoodleUrl(\"success\") \r\n        }));\r\n\r\n        try {\r\n            const app = await Client.connect(SPACE_URL);\r\n            const res = await app.predict(\"/generate_mission\", [randomTopic]);\r\n            const data = JSON.parse(res.data[0]);\r\n            \r\n            // Artificial delay (1.5s) so they can read the \"Thank You\" message\r\n            setTimeout(() => {\r\n                setMission({ \r\n                    text: data.text, \r\n                    subtext: \"Journal Entry â€¢ Keep it short (1 sentence)\", \r\n                    image: getDoodleUrl(randomTopic) \r\n                });\r\n            }, 1500);\r\n            \r\n        } catch { \r\n            setMission({ \r\n                text: `Tell me a short sentence about your ${randomTopic.toLowerCase()}.`, \r\n                subtext: \"Offline Mode â€¢ Keep it short (1 sentence)\", \r\n                image: getDoodleUrl(\"coffee\") \r\n            }); \r\n        }\r\n    };\r\n\r\n    // Load first topic on mount\r\n    useEffect(() => { loadNextTopic(); }, []);\r\n\r\n    return (\r\n        <SharedGameLayout\r\n            title=\"ARCHIVE ENTRY\"\r\n            mission={mission}\r\n            recStatus={status}\r\n            startRec={startRecording}\r\n            stopRec={stopRecording}\r\n            mediaBlob={mediaBlobUrl}\r\n            dialects={dialects}\r\n            userKey={userKey}\r\n            setXP={setXP}\r\n            onBack={onBack}\r\n            onNext={loadNextTopic} \r\n        />\r\n    );\r\n}\r\n\r\n// ==========================================\r\n// âš¡ GAME 2: SPEED CHAT (Infinite Loop + Timer)\r\n// ==========================================\r\nfunction GameSpeedChat({ userKey, setXP, dialects, onBack, greeting }) {\r\n    const [stage, setStage] = useState(\"onboarding\"); \r\n    const [nickname, setNickname] = useState(localStorage.getItem(\"pure_nickname\") || \"\");\r\n    \r\n    const [mission, setMission] = useState({ \r\n        text: greeting, \r\n        subtext: \"Establishing Secure Link...\",\r\n        image: getDoodleUrl(\"network\") \r\n    });\r\n\r\n    const [timeLeft, setTimeLeft] = useState(10);\r\n    const { status, startRecording, stopRecording, mediaBlobUrl } = useReactMediaRecorder({ \r\n    \taudio: true,\r\n    \tblobPropertyBag: { type: \"audio/wav\" } // ðŸŸ¢ FORCE WAV FORMAT\r\n    });\r\n    \r\n    const timerRef = useRef(null);\r\n\r\n    // Timer Logic\r\n    useEffect(() => {\r\n        if (status === \"recording\") {\r\n            setTimeLeft(10);\r\n            timerRef.current = setInterval(() => {\r\n                setTimeLeft(p => {\r\n                    if (p <= 1) { stopRecording(); return 0; }\r\n                    return p - 1;\r\n                });\r\n            }, 1000);\r\n        } else { clearInterval(timerRef.current); }\r\n        return () => clearInterval(timerRef.current);\r\n    }, [status, stopRecording]);\r\n\r\n    const fetchMission = async (topic) => {\r\n        setMission(prev => ({ \r\n            ...prev, \r\n            text: greeting, \r\n            subtext: `Loading Topic: ${topic}...` \r\n        }));\r\n        \r\n        try {\r\n            const app = await Client.connect(SPACE_URL);\r\n            const res = await app.predict(\"/generate_mission\", [`Ask ${nickname} about ${topic}`]);\r\n            const data = JSON.parse(res.data[0]);\r\n            setMission({ text: data.text, subtext: `Target: ${topic}`, image: getDoodleUrl(topic) });\r\n        } catch { \r\n            setMission({ text: `Hey ${nickname}, tell me about ${topic}!`, subtext: \"Offline Mode\", image: getDoodleUrl(topic) }); \r\n        }\r\n    };\r\n\r\n    if (stage === \"onboarding\") {\r\n        return (\r\n            <div className=\"onboarding-screen\">\r\n                <h3>IDENTIFY YOURSELF</h3>\r\n                <input className=\"cyber-input\" value={nickname} onChange={e => setNickname(e.target.value)} placeholder=\"Enter Codename\" />\r\n                <div style={{marginTop:'20px'}}>\r\n                    <button className=\"cyber-button\" onClick={() => {\r\n                        if(!nickname) return;\r\n                        localStorage.setItem(\"pure_nickname\", nickname);\r\n                        setStage(\"challenge\");\r\n                        fetchMission(\"Hobbies\");\r\n                    }}>START MISSION</button>\r\n                    <br/><br/>\r\n                    <button className=\"cancel-btn\" onClick={onBack}>RETURN TO BASE</button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <SharedGameLayout\r\n            title={`CHAT: ${nickname.toUpperCase()}`}\r\n            mission={mission}\r\n            recStatus={status}\r\n            startRec={startRecording}\r\n            stopRec={stopRecording}\r\n            mediaBlob={mediaBlobUrl}\r\n            dialects={dialects}\r\n            userKey={userKey}\r\n            setXP={setXP}\r\n            onBack={onBack}\r\n            timer={timeLeft} \r\n            onNext={() => fetchMission(getRandom([\"Food\", \"Traffic\", \"Music\", \"Money\", \"Work\", \"School\", \"Family\", \"Dreams\"]))} \r\n        />\r\n    );\r\n}\r\n\r\n// ==========================================\r\n// ðŸ‘ï¸ GAME 3: VISION QUEST (Clean View + Infinite)\r\n// ==========================================\r\nfunction GameVisionQuest({ userKey, setXP, dialects, onBack, greeting }) {\r\n    const [mission, setMission] = useState({ \r\n        text: greeting, \r\n        subtext: \"Calibrating Optical Sensors...\",\r\n        image: getPhotoUrl(\"cyberpunk\") \r\n    });\r\n\r\n    // Inside GameVisionQuest\r\n    const { status, startRecording, stopRecording, mediaBlobUrl } = useReactMediaRecorder({ \r\n    \taudio: true,\r\n    \tblobPropertyBag: { type: \"audio/wav\" } // ðŸŸ¢ FORCE WAV FORMAT\r\n    });\r\n\r\n    const loadNewImage = () => {\r\n        const keywords = [\"market\", \"street\", \"festival\", \"classroom\", \"kitchen\", \"traffic\", \"cyberpunk\", \"park\", \"office\"];\r\n        const k = getRandom(keywords);\r\n        setMission({\r\n            text: \"In your own way, describe the first thing you see in this image.\",\r\n            subtext: `Target Sector: ${k.toUpperCase()}`,\r\n            image: getPhotoUrl(k) \r\n        });\r\n    };\r\n\r\n    // Load initial image (user sees greeting briefly then this loads)\r\n    useEffect(() => { \r\n        setTimeout(loadNewImage, 2500); \r\n    }, []);\r\n\r\n    return (\r\n        <SharedGameLayout\r\n            title=\"OBSERVATION DECK\"\r\n            mission={mission}\r\n            recStatus={status}\r\n            startRec={startRecording}\r\n            stopRec={stopRecording}\r\n            mediaBlob={mediaBlobUrl}\r\n            dialects={dialects}\r\n            userKey={userKey}\r\n            setXP={setXP}\r\n            onBack={onBack}\r\n            onNext={loadNewImage} \r\n            mode=\"vision\" \r\n        />\r\n    );\r\n}\r\n\r\n\r\n// ==========================================\r\n// ðŸ‘‚ GAME 4: THE LISTENER (Auto-Process & Flow)\r\n// ==========================================\r\nfunction GameActiveListener({ userKey, setXP, dialects, onBack }) {\r\n    // STATE\r\n    const [messages, setMessages] = useState([\r\n        { sender: 'ai', text: \"Hello! I'm Echo. What should I call you?\" }\r\n    ]);\r\n    const [phase, setPhase] = useState(\"onboarding\"); // onboarding, chat, processing, verify, responding\r\n    const [nickname, setNickname] = useState(\"\");\r\n    \r\n    // CURRENT TURN DATA\r\n    const [currentAudio, setCurrentAudio] = useState(null); // Stores the blob for submission\r\n    const [currentTranscript, setCurrentTranscript] = useState(\"\");\r\n    const [currentClarification, setCurrentClarification] = useState(\"\");\r\n    \r\n    const chatEndRef = useRef(null);\r\n    const IS_ADMIN = true; // Toggle for direct commit\r\n\r\n    // Auto-scroll\r\n    useEffect(() => { chatEndRef.current?.scrollIntoView({ behavior: \"smooth\" }); }, [messages, phase]);\r\n\r\n    // TTS Helper\r\n    const speak = (text) => {\r\n        if ('speechSynthesis' in window) {\r\n            window.speechSynthesis.cancel(); // Stop previous speech\r\n            const u = new SpeechSynthesisUtterance(text);\r\n            u.pitch = 1; u.rate = 1.1; // Slightly faster for natural flow\r\n            window.speechSynthesis.speak(u);\r\n        }\r\n    };\r\n\r\n    // ðŸŸ¢ 1. AUTOMATIC AUDIO HANDLER (Triggered on Release)\r\n    const handleAudioStop = async (blobUrl, blob) => {\r\n        setPhase(\"processing\");\r\n        setCurrentAudio(blob); // Save for later submission\r\n\r\n        try {\r\n            const app = await Client.connect(SPACE_URL);\r\n            \r\n            // A. Transcribe\r\n            const d = dialects[0] || \"General\";\r\n            const tRes = await app.predict(\"/transcribe_check\", [blob, d]);\r\n            const text = tRes.data[0];\r\n            setCurrentTranscript(text);\r\n            \r\n            // B. Clarify (Active Listening)\r\n            const cRes = await app.predict(\"/generate_clarifications\", [text, d]);\r\n            const cText = parseClarification(cRes.data[0]);\r\n            \r\n            setCurrentClarification(cText);\r\n            setPhase(\"verify\");\r\n            \r\n            // ðŸŸ¢ TTS: Immediately verify via voice\r\n            speak(`Did you mean: ${cText}`);\r\n            \r\n        } catch (e) {\r\n            console.error(\"Processing Error:\", e);\r\n            setMessages(p => [...p, { sender: 'ai', text: \"I didn't catch that. Could you say it again?\" }]);\r\n            speak(\"I didn't catch that. Could you say it again?\");\r\n            setPhase(\"chat\");\r\n        }\r\n    };\r\n\r\n    // ðŸŸ¢ 2. RECORDING HOOK (With onStop trigger)\r\n    const { status, startRecording, stopRecording } = useReactMediaRecorder({ \r\n        audio: true, \r\n        blobPropertyBag: { type: \"audio/wav\" },\r\n        onStop: handleAudioStop // <--- THIS MAKES IT AUTOMATIC\r\n    });\r\n\r\n    // 3. TEXT INPUT HANDLER (Only for Nickname/Onboarding)\r\n    const handleTextInput = () => {\r\n        if (!currentTranscript.trim()) return;\r\n        const name = currentTranscript.trim();\r\n        setNickname(name);\r\n        \r\n        const response = `Nice to meet you, ${name}. I'm listening. What's on your mind?`;\r\n        setMessages(p => [\r\n            ...p, \r\n            { sender: 'user', text: name },\r\n            { sender: 'ai', text: response }\r\n        ]);\r\n        speak(response);\r\n        setCurrentTranscript(\"\");\r\n        setPhase(\"chat\");\r\n    };\r\n\r\n    // 4. CONFIRMATION HANDLER (Save & Continue)\r\n    const handleConfirm = async () => {\r\n        // A. Update Chat Log\r\n        setMessages(p => [\r\n            ...p,\r\n            { sender: 'user', text: currentTranscript, isAudio: true },\r\n            { sender: 'ai', text: `Got it: \"${currentClarification}\"` }\r\n        ]);\r\n\r\n        // B. Background Save\r\n        const app = await Client.connect(SPACE_URL);\r\n        const d = dialects[0] || \"General\";\r\n        \r\n        // Fire and forget (don't await this, keeps UI snappy)\r\n        app.predict(\"/check_and_submit_logic\", [\r\n            currentTranscript, d, \"\", currentClarification, \"Conversational\", \"Chat\", \"Active Listening\", userKey, currentAudio, IS_ADMIN\r\n        ]);\r\n\r\n        // C. Generate Follow-up\r\n        setPhase(\"responding\");\r\n        try {\r\n            const prompt = `Reply to this statement naturally: \"${currentClarification}\"`;\r\n            const res = await app.predict(\"/generate_mission\", [prompt]); \r\n            const data = JSON.parse(res.data[0]);\r\n            const reply = data.text;\r\n            \r\n            setMessages(p => [...p, { sender: 'ai', text: reply }]);\r\n            speak(reply);\r\n            setPhase(\"chat\");\r\n        } catch {\r\n            const fallback = \"That's interesting. Tell me more.\";\r\n            setMessages(p => [...p, { sender: 'ai', text: fallback }]);\r\n            speak(fallback);\r\n            setPhase(\"chat\");\r\n        }\r\n        \r\n        // Cleanup\r\n        setXP(x => x + 25);\r\n        setCurrentTranscript(\"\");\r\n        setCurrentClarification(\"\");\r\n    };\r\n\r\n    const parseClarification = (raw) => {\r\n        try { return JSON.parse(raw).clarification || raw; } \r\n        catch { return raw; }\r\n    };\r\n\r\n    return (\r\n        <div className=\"game-layout listener-mode\">\r\n            {/* TOP BAR */}\r\n            <div className=\"listener-header\">\r\n                <button className=\"back-icon\" onClick={onBack}>â†</button>\r\n                <div className={`status-dot ${status === \"recording\" ? \"pulsing-red\" : \"\"}`}></div>\r\n                <h3>ECHO {nickname ? `| ${nickname.toUpperCase()}` : \"\"}</h3>\r\n            </div>\r\n\r\n            {/* CHAT LOG */}\r\n            <div className=\"chat-log\">\r\n                {messages.map((m, i) => (\r\n                    <div key={i} className={`chat-bubble ${m.sender}`}>\r\n                        {m.isAudio && <span style={{marginRight:'5px'}}>ðŸŽ¤</span>}\r\n                        {m.text}\r\n                    </div>\r\n                ))}\r\n                {phase === \"processing\" && <div className=\"chat-bubble ai typing\">Echo is thinking...</div>}\r\n                {phase === \"responding\" && <div className=\"chat-bubble ai typing\">Echo is replying...</div>}\r\n                <div ref={chatEndRef} />\r\n            </div>\r\n\r\n            {/* INTERACTION AREA */}\r\n            <div className=\"listener-controls\">\r\n                \r\n                {/* STATE 1: ONBOARDING (Text) */}\r\n                {phase === \"onboarding\" && (\r\n                    <div className=\"input-bar\">\r\n                        <input \r\n                            className=\"cyber-input\"\r\n                            value={currentTranscript} \r\n                            onChange={e => setCurrentTranscript(e.target.value)} \r\n                            placeholder=\"Type your nickname...\"\r\n                            onKeyDown={(e) => e.key === 'Enter' && handleTextInput()}\r\n                        />\r\n                        <button className=\"cyber-button\" onClick={handleTextInput} style={{marginLeft:'10px'}}>SEND</button>\r\n                    </div>\r\n                )}\r\n\r\n                {/* STATE 2: CHAT (Voice) */}\r\n                {(phase === \"chat\" || phase === \"processing\" || phase === \"responding\") && (\r\n                    <div className=\"record-bar\">\r\n                        <button \r\n                            className={`record-btn ${status === \"recording\" ? \"pulsing\" : \"\"}`}\r\n                            onMouseDown={startRecording} onMouseUp={stopRecording}\r\n                            onTouchStart={startRecording} onTouchEnd={stopRecording}\r\n                            disabled={phase !== \"chat\"} // Disable while processing\r\n                            style={{width: '100%', borderRadius: '12px', padding: '20px'}}\r\n                        >\r\n                            {status === \"recording\" ? \"ðŸ›‘ RELEASE TO SEND\" : \r\n                             phase === \"processing\" ? \"â³ PROCESSING...\" :\r\n                             phase === \"responding\" ? \"ðŸ”Š SPEAKING...\" :\r\n                             \"ðŸŽ™ï¸ HOLD TO SPEAK\"}\r\n                        </button>\r\n                    </div>\r\n                )}\r\n\r\n                {/* STATE 3: VERIFY (Edit & Confirm) */}\r\n                {phase === \"verify\" && (\r\n                    <div className=\"verify-card\">\r\n                        <div className=\"verify-row\">\r\n                            <label>YOU SAID (EDIT IF WRONG):</label>\r\n                            <input \r\n                                className=\"cyber-input\"\r\n                                value={currentTranscript} \r\n                                onChange={e => setCurrentTranscript(e.target.value)} \r\n                            />\r\n                        </div>\r\n                        <div className=\"verify-row\">\r\n                            <label>ECHO HEARD:</label>\r\n                            <div className=\"ai-text\">\"{currentClarification}\"</div>\r\n                        </div>\r\n                        <div className=\"verify-actions\">\r\n                            <button className=\"reject-btn\" onClick={() => { setPhase(\"chat\"); setCurrentTranscript(\"\"); }}>RETRY</button>\r\n                            <button className=\"confirm-btn\" onClick={handleConfirm}>YES, CONTINUE âœ…</button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n// ==========================================\r\n// âš™ï¸ SHARED GAME LAYOUT (Updated with Regenerate)\r\n// ==========================================\r\nfunction SharedGameLayout({ title, mission, recStatus, startRec, stopRec, mediaBlob, dialects, userKey, setXP, onBack, onNext, timer, mode }) {\r\n    const [step, setStep] = useState(\"RECORD\"); \r\n    \r\n    // Data State\r\n    const [transcribed, setTranscribed] = useState(\"\");\r\n    const [clarification, setClarification] = useState(\"\");\r\n    const [tone, setTone] = useState(\"Neutral / Conversational\"); \r\n    const [context, setContext] = useState(\"General\");\r\n    const [pragmatics, setPragmatics] = useState(\"\");\r\n    const [isRegenerating, setIsRegenerating] = useState(false); // ðŸŸ¢ NEW STATE\r\n    \r\n    const [dialect, setDialect] = useState(dialects[0] || \"General\");\r\n    const [customD, setCustomD] = useState(\"\");\r\n\r\n    // 1. Initial Analysis (Audio -> Text + Meaning)\r\n    const handleAnalyze = async () => {\r\n        if (!mediaBlob) return;\r\n        setStep(\"ANALYZING\");\r\n        try {\r\n            const blob = await fetch(mediaBlob).then(r => r.blob());\r\n            const app = await Client.connect(SPACE_URL);\r\n            const d = dialect === \"+ Add New Dialect\" ? customD : dialect;\r\n            \r\n            const tRes = await app.predict(\"/transcribe_check\", [blob, d]);\r\n            const text = tRes.data[0];\r\n            setTranscribed(text);\r\n            \r\n            // Initial Clarification\r\n            const cRes = await app.predict(\"/generate_clarifications\", [text, d]);\r\n            parseClarification(cRes.data[0]);\r\n            \r\n            setStep(\"REVIEW\");\r\n        } catch (e) { \r\n            console.error(e);\r\n            setStep(\"REVIEW\"); \r\n            setTranscribed(\"Error analyzing audio.\"); \r\n        }\r\n    };\r\n\r\n    // 2. ðŸŸ¢ NEW: Regenerate Meaning (Text -> Meaning)\r\n    const handleRegenerate = async () => {\r\n        if (!transcribed.trim()) return;\r\n        setIsRegenerating(true);\r\n        try {\r\n            const app = await Client.connect(SPACE_URL);\r\n            const d = dialect === \"+ Add New Dialect\" ? customD : dialect;\r\n            \r\n            const res = await app.predict(\"/generate_clarifications\", [transcribed, d]);\r\n            parseClarification(res.data[0]);\r\n            \r\n            setIsRegenerating(false);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setClarification(\"Failed to regenerate. Please type manually.\");\r\n            setIsRegenerating(false);\r\n        }\r\n    };\r\n\r\n    // Helper to parse JSON or String responses\r\n    const parseClarification = (rawData) => {\r\n        let data;\r\n        try {\r\n            data = JSON.parse(rawData);\r\n        } catch {\r\n            data = { clarification: rawData }; // Fallback for plain text\r\n        }\r\n        setClarification(data.clarification || data.Meaning || rawData);\r\n        setContext(data.context || \"General\");\r\n        setPragmatics(data.pragmatics || \"\");\r\n    };\r\n\r\n    // 3. Final Submit\r\n    const handleSubmit = async () => {\r\n        setStep(\"MINTING\");\r\n        try {\r\n            const blob = await fetch(mediaBlob).then(r => r.blob());\r\n            const app = await Client.connect(SPACE_URL);\r\n            const d = dialect === \"+ Add New Dialect\" ? customD : dialect;\r\n            \r\n            await app.predict(\"/check_and_submit_logic\", [\r\n                transcribed, d, customD, clarification, tone, context, pragmatics, userKey, blob, false\r\n            ]);\r\n            setXP(p => p + 50);\r\n            \r\n            if (onNext) { \r\n                setStep(\"RECORD\"); \r\n                setTranscribed(\"\");\r\n                setClarification(\"\");\r\n                onNext(); \r\n            } \r\n            else { onBack(); }\r\n        } catch { setStep(\"RECORD\"); }\r\n    };\r\n\r\n    return (\r\n        <div className=\"game-layout\">\r\n            \r\n            {/* DYNAMIC LAYOUT SWITCHER */}\r\n            {mode === \"vision\" ? (\r\n                <div className=\"vision-mode-container\">\r\n                    <div className=\"vision-image\" style={{backgroundImage: `url(${mission.image})`}} />\r\n                    <div className=\"vision-text-block\">\r\n                        <h3>{title}</h3>\r\n                        {mission.subtext && <p className=\"subtext\">{mission.subtext}</p>}\r\n                        <p className=\"main-text\">{mission.text}</p>\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <div className=\"mission-card\">\r\n                    <div className=\"doodle-bg\" style={{backgroundImage: `url(${mission.image})`}} />\r\n                    <div className=\"mission-content-overlay\">\r\n                        <div>\r\n                            <h3>{title}</h3>\r\n                            {mission.subtext && <p style={{fontSize:'0.8em', opacity:0.7, marginBottom:'5px'}}>{mission.subtext}</p>}\r\n                            <p>{mission.text}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"control-panel\">\r\n                {step === \"RECORD\" && (\r\n                    <>\r\n                        <div className=\"dialect-selector\">\r\n                            <label style={{fontSize: '11px', color: '#94a3b8', display: 'block', marginBottom: '6px', letterSpacing: '1px', fontWeight: '600'}}>\r\n                                SELECT TARGET DIALECT (OR ADD NEW):\r\n                            </label>\r\n\r\n                            <select value={dialect} onChange={e => setDialect(e.target.value)}>\r\n                                {dialects.map(d => <option key={d} value={d}>{d}</option>)}\r\n                            </select>\r\n                            {dialect === \"+ Add New Dialect\" && (\r\n                                <input \r\n                                    className=\"cyber-input\" \r\n                                    placeholder=\"Enter Name (e.g. Toronto Slang)\" \r\n                                    value={customD} \r\n                                    onChange={e => setCustomD(e.target.value)} \r\n                                    style={{marginTop:'8px'}}\r\n                                />\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className={`record-zone ${recStatus === \"recording\" ? \"active\" : \"\"}`}>\r\n                            {timer !== undefined && recStatus === \"recording\" && <div className=\"timer\">{timer}s</div>}\r\n                            <button \r\n                                className={`record-btn ${recStatus === \"recording\" ? \"pulsing\" : \"\"}`}\r\n                                onMouseDown={startRec} onMouseUp={stopRec}\r\n                                onTouchStart={startRec} onTouchEnd={stopRec}\r\n                            >\r\n                                {recStatus === \"recording\" ? \"ðŸ›‘ RELEASE\" : \"ðŸŽ™ï¸ HOLD TO SPEAK\"}\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"action-row\">\r\n                             <button className=\"cancel-btn\" onClick={onBack}>BACK</button>\r\n                             <button className=\"cyber-button\" onClick={handleAnalyze} disabled={!mediaBlob}>ANALYZE</button>\r\n                        </div>\r\n                    </>\r\n                )}\r\n\r\n                {(step === \"ANALYZING\" || step === \"MINTING\") && <div className=\"loading\">PROCESSING...</div>}\r\n\r\n                {step === \"REVIEW\" && (\r\n                    <div className=\"review-box\">\r\n                        <div className=\"audio-preview\" style={{marginBottom: '10px'}}>\r\n                            <label style={{fontSize:'10px', color:'#94a3b8', display:'block', marginBottom:'5px'}}>REVIEW RECORDING:</label>\r\n                            <audio src={mediaBlob} controls style={{width: '100%', borderRadius: '8px'}} />\r\n                        </div>\r\n\r\n                        {/* ðŸŸ¢ EDITABLE TRANSCRIPTION */}\r\n                        <div className=\"input-group\">\r\n                            <div style={{display:'flex', justifyContent:'space-between', alignItems:'center'}}>\r\n                                <label>I HEARD (EDIT IF NEEDED):</label>\r\n                            </div>\r\n                            <textarea value={transcribed} onChange={e => setTranscribed(e.target.value)} />\r\n                        </div>\r\n                        \r\n                        {/* ðŸŸ¢ REGENERATE BUTTON + MEANING */}\r\n                        <div className=\"input-group\">\r\n                            <div style={{display:'flex', justifyContent:'space-between', alignItems:'center', marginBottom:'5px'}}>\r\n                                <label style={{margin:0}}>MEANING:</label>\r\n                                <button \r\n                                    onClick={handleRegenerate}\r\n                                    disabled={isRegenerating}\r\n                                    style={{\r\n                                        background: 'transparent', border: '1px solid #38bdf8', color: '#38bdf8',\r\n                                        fontSize: '10px', padding: '2px 8px', borderRadius: '4px', cursor: 'pointer'\r\n                                    }}\r\n                                >\r\n                                    {isRegenerating ? \"UPDATING...\" : \"ðŸ”„ REGENERATE FROM TEXT\"}\r\n                                </button>\r\n                            </div>\r\n                            <textarea value={clarification} onChange={e => setClarification(e.target.value)} />\r\n                        </div>\r\n\r\n                        <div className=\"input-group\">\r\n                            <label>TONE:</label>\r\n                            <select value={tone} onChange={e => setTone(e.target.value)}>\r\n                                {TONES.map(t => <option key={t} value={t}>{t}</option>)}\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div className=\"action-row\">\r\n                            <button className=\"cancel-btn\" onClick={() => setStep(\"RECORD\")}>RETRY</button>\r\n                            <button className=\"cyber-button\" onClick={handleSubmit}>MINT (+50 XP)</button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}